{"version":3,"sources":["webpack:///webgl-terrain/bundle.js","webpack:///webpack/bootstrap 4871d52e9dd13e45a93c","webpack:///external \"THREE\"","webpack:///src/webgl-terrain/App.fs","webpack:///./src/pong/Keyboard.fs"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","110","THREE","148","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__App_fs__","149","generateHeight","width","height","size","data","Float64Array","perlin","ImprovedNoise","quality","z","Math","random","j","x","y","noise","abs","generateTexture","vector3","__WEBPACK_IMPORTED_MODULE_2_three__","sun","normalize","canvas","document","createElement","context","getContext","fillStyle","fillRect","image","getImageData","imageData","length","shade","dot","putImageData","canvasScaled","context_1","scale","drawImage","image_1","imageData_1","i_1","l_1","v","init","getWidth","window","innerWidth","getHeight","innerHeight","container","getElementById","camera","scene","renderer","setClearColor","setSize","domElement","innerHTML","appendChild","controls","FirstPersonControls","movementSpeed","lookSpeed","worldWidth","worldDepth","position","worldHalfWidth","worldHalfDepth","geometry","applyMatrix","makeRotationX","PI","vertices","getAttribute","vertices_1","array","texCanvas","texture","needsUpdate","matProps","map","mesh","add","onWindowResize","e","aspect","updateProjectionMatrix","handleResize","addEventListener","delegateArg0","render","update","clock","getDelta","animate","dt","requestAnimationFrame","__WEBPACK_IMPORTED_MODULE_0__lib_ImprovedNoise_js__","__WEBPACK_IMPORTED_MODULE_1__lib_FirstPersonControls_js__","patternInput_255_3","150","fade","t","lerp","a","b","grad","hash","h","u","floorX","floorY","floorZ","X","Y","Z","xMinus1","yMinus1","zMinus1","w","A","AA","AB","B","BA","BB","151","getOffsetRect","elem","box","getBoundingClientRect","body","docElem","documentElement","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","top","left","round","bind","scope","fn","apply","arguments","this","target","Vector3","undefined","lookVertical","autoForward","activeLook","heightSpeed","heightCoef","heightMin","heightMax","constrainVertical","verticalMin","verticalMax","autoSpeedFactor","mouseX","mouseY","lat","lon","phi","theta","moveForward","moveBackward","moveLeft","moveRight","freeze","mouseDragOn","viewHalfX","viewHalfY","setAttribute","offsetWidth","offsetHeight","onMouseDown","event","focus","preventDefault","stopPropagation","button","onMouseUp","onMouseMove","pageX","pageY","rect","onKeyDown","keyCode","moveUp","moveDown","onKeyUp","delta","clamp","heightDelta","actualMoveSpeed","translateZ","translateX","translateY","actualLookSpeed","verticalLookRatio","max","min","degToRad","mapLinear","targetPosition","sin","cos","lookAt"],"mappings":"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","file":"webgl-terrain/bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 148);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 110:\n/***/ (function(module, exports) {\n\nmodule.exports = THREE;\n\n/***/ }),\n\n/***/ 148:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__App_fs__ = __webpack_require__(149);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"ImprovedNoise\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"FirstPersonControls\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"worldWidth\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"p\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"worldDepth\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"m\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"worldHalfWidth\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"o\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"worldHalfDepth\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"n\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"clock\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"e\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"generateHeight\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"g\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"generateTexture\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"h\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"i\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"scene\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"l\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"renderer\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"k\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"controls\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"f\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"camera\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"d\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"j\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"animate\", function() { return __WEBPACK_IMPORTED_MODULE_0__App_fs__[\"c\"]; });\n\n\n/***/ }),\n\n/***/ 149:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return ImprovedNoise; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FirstPersonControls; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return worldWidth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return worldDepth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return worldHalfWidth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return worldHalfDepth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return clock; });\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = generateHeight;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = generateTexture;\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = init;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return scene; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return renderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return controls; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return camera; });\n/* harmony export (immutable) */ __webpack_exports__[\"j\"] = render;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = animate;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_ImprovedNoise_js__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_FirstPersonControls_js__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(110);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_three__);\n\n\n\n\nvar ImprovedNoise = __WEBPACK_IMPORTED_MODULE_0__lib_ImprovedNoise_js__[\"a\" /* default */];\nvar FirstPersonControls = __WEBPACK_IMPORTED_MODULE_1__lib_FirstPersonControls_js__[\"a\" /* default */];\nvar worldWidth = 256;\nvar worldDepth = 256;\nvar worldHalfWidth = ~~(worldWidth / 2);\nvar worldHalfDepth = ~~(worldDepth / 2);\nvar clock = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Clock\"]();\nfunction generateHeight(width, height) {\n    var size = width * height | 0;\n    var data = new Float64Array(size);\n    var perlin = ImprovedNoise();\n    var quality = 1;\n    var z = Math.random() * 100;\n\n    for (var j = 0; j <= 3; j++) {\n        for (var i = 0; i <= size - 1; i++) {\n            var x = i % width | 0;\n            var y = ~~(i / width) | 0;\n            var noise = perlin.noise(x / quality, y / quality, z) * quality * 1.75;\n            data[i] = data[i] + Math.abs(noise);\n        }\n\n        quality = quality * 5;\n    }\n\n    return data;\n}\nfunction generateTexture(data, width, height) {\n    var vector3 = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Vector3\"](0, 0, 0);\n    var sun = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Vector3\"](1, 1, 1).normalize();\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    var context = canvas.getContext(\"2d\");\n    context.fillStyle = \"#000\";\n    context.fillRect(0, 0, width, height);\n    var image = context.getImageData(0, 0, canvas.width, canvas.height);\n    var imageData = image.data;\n    var i = 0;\n    var j = 0;\n    var l = ~~imageData.length | 0;\n\n    while (i < l) {\n        vector3.x = data[j - 2] - data[j + 2];\n        vector3.y = 2;\n        vector3.z = data[j - width * 2] - data[j + width * 2];\n        vector3.normalize();\n        var shade = vector3.dot(sun);\n        imageData[i] = (96 + shade * 128) * (0.5 + data[j] * 0.007);\n        imageData[i + 1] = (32 + shade * 96) * (0.5 + data[j] * 0.007);\n        imageData[i + 2] = shade * 96 * (0.5 + data[j] * 0.007);\n        i = i + 4 | 0;\n        j = j + 1 | 0;\n    }\n\n    context.putImageData(image, 0, 0);\n    var canvasScaled = document.createElement(\"canvas\");\n    canvasScaled.width = width * 4;\n    canvasScaled.height = height * 4;\n    var context_1 = canvasScaled.getContext(\"2d\");\n    context_1.scale(4, 4);\n    context_1.drawImage(canvas, 0, 0);\n    var image_1 = context_1.getImageData(0, 0, canvasScaled.width, canvasScaled.height);\n    var imageData_1 = image_1.data;\n    var i_1 = 0;\n    var l_1 = ~~imageData_1.length | 0;\n\n    while (i_1 < l_1) {\n        var v = ~~~~(Math.random() * 5);\n        imageData_1[i_1] = imageData_1[i_1] + v;\n        imageData_1[i_1 + 1] = imageData_1[i_1 + 1] + v;\n        imageData_1[i_1 + 2] = imageData_1[i_1 + 2] + v;\n        i_1 = i_1 + 4 | 0;\n    }\n\n    context_1.putImageData(image_1, 0, 0);\n    return canvasScaled;\n}\nfunction init() {\n    var getWidth = function getWidth() {\n        return window.innerWidth;\n    };\n\n    var getHeight = function getHeight() {\n        return window.innerHeight;\n    };\n\n    var container = document.getElementById(\"container\");\n    var camera = new __WEBPACK_IMPORTED_MODULE_2_three__[\"PerspectiveCamera\"](60, getWidth() / getHeight(), 1, 20000);\n    var scene = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Scene\"]();\n    var renderer = new __WEBPACK_IMPORTED_MODULE_2_three__[\"WebGLRenderer\"]();\n    renderer.setClearColor(\"#bfd1e5\");\n    renderer.setSize(getWidth(), getHeight());\n    var domElement = renderer.domElement;\n    container.innerHTML = \"\";\n    container.appendChild(domElement);\n    var controls = new FirstPersonControls(camera, domElement);\n    controls.movementSpeed = 1000;\n    controls.lookSpeed = 0.1;\n    var data = generateHeight(worldWidth, worldDepth);\n    camera.position.y = data[worldHalfWidth + worldHalfDepth * worldWidth] * 10 + 500;\n    var geometry = new __WEBPACK_IMPORTED_MODULE_2_three__[\"PlaneBufferGeometry\"](7500, 7500, worldWidth - 1, worldDepth - 1);\n    geometry.applyMatrix(new __WEBPACK_IMPORTED_MODULE_2_three__[\"Matrix4\"]().makeRotationX(-Math.PI / 2));\n    var vertices = geometry.getAttribute(\"position\");\n    var vertices_1 = vertices.array;\n    var l = ~~vertices_1.length | 0;\n    var i = 0;\n    var j = 0;\n\n    while (i < l) {\n        vertices_1[j + 1] = data[i] * 10;\n        i = i + 1 | 0;\n        j = j + 3 | 0;\n    }\n\n    var texCanvas = generateTexture(data, worldWidth, worldDepth);\n    var texture = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Texture\"](texCanvas, __WEBPACK_IMPORTED_MODULE_2_three__[\"UVMapping\"], __WEBPACK_IMPORTED_MODULE_2_three__[\"ClampToEdgeWrapping\"], __WEBPACK_IMPORTED_MODULE_2_three__[\"ClampToEdgeWrapping\"]);\n    texture.needsUpdate = true;\n    var matProps = {};\n    matProps.map = texture;\n    var mesh = new __WEBPACK_IMPORTED_MODULE_2_three__[\"Mesh\"](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"MeshBasicMaterial\"](matProps));\n    scene.add(mesh);\n\n    var onWindowResize = function onWindowResize(e) {\n        camera.aspect = getWidth() / getHeight();\n        camera.updateProjectionMatrix();\n        renderer.setSize(getWidth(), getHeight());\n        controls.handleResize();\n        return null;\n    };\n\n    window.addEventListener(\"resize\", function (delegateArg0) {\n        return onWindowResize(delegateArg0);\n    }, false);\n    return [renderer, scene, camera, controls];\n}\nvar patternInput_255_3 = init();\nvar scene = patternInput_255_3[1];\nvar renderer = patternInput_255_3[0];\nvar controls = patternInput_255_3[3];\nvar camera = patternInput_255_3[2];\nfunction render() {\n    controls.update(clock.getDelta());\n    renderer.render(scene, camera);\n}\nfunction animate(dt) {\n    window.requestAnimationFrame(function (delegateArg0) {\n        animate(delegateArg0);\n    });\n    render();\n}\nanimate(0);\n\n/***/ }),\n\n/***/ 150:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ImprovedNoise;\n// http://mrl.nyu.edu/~perlin/noise/\n\nfunction ImprovedNoise() {\n\n\tvar p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\n\n\tfor (var i = 0; i < 256; i++) {\n\n\t\tp[256 + i] = p[i];\n\t}\n\n\tfunction fade(t) {\n\n\t\treturn t * t * t * (t * (t * 6 - 15) + 10);\n\t}\n\n\tfunction lerp(t, a, b) {\n\n\t\treturn a + t * (b - a);\n\t}\n\n\tfunction grad(hash, x, y, z) {\n\n\t\tvar h = hash & 15;\n\t\tvar u = h < 8 ? x : y,\n\t\t    v = h < 4 ? y : h == 12 || h == 14 ? x : z;\n\t\treturn ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\n\t}\n\n\treturn {\n\n\t\tnoise: function noise(x, y, z) {\n\n\t\t\tvar floorX = ~~x,\n\t\t\t    floorY = ~~y,\n\t\t\t    floorZ = ~~z;\n\n\t\t\tvar X = floorX & 255,\n\t\t\t    Y = floorY & 255,\n\t\t\t    Z = floorZ & 255;\n\n\t\t\tx -= floorX;\n\t\t\ty -= floorY;\n\t\t\tz -= floorZ;\n\n\t\t\tvar xMinus1 = x - 1,\n\t\t\t    yMinus1 = y - 1,\n\t\t\t    zMinus1 = z - 1;\n\n\t\t\tvar u = fade(x),\n\t\t\t    v = fade(y),\n\t\t\t    w = fade(z);\n\n\t\t\tvar A = p[X] + Y,\n\t\t\t    AA = p[A] + Z,\n\t\t\t    AB = p[A + 1] + Z,\n\t\t\t    B = p[X + 1] + Y,\n\t\t\t    BA = p[B] + Z,\n\t\t\t    BB = p[B + 1] + Z;\n\n\t\t\treturn lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z), grad(p[BA], xMinus1, y, z)), lerp(u, grad(p[AB], x, yMinus1, z), grad(p[BB], xMinus1, yMinus1, z))), lerp(v, lerp(u, grad(p[AA + 1], x, y, zMinus1), grad(p[BA + 1], xMinus1, y, z - 1)), lerp(u, grad(p[AB + 1], x, yMinus1, zMinus1), grad(p[BB + 1], xMinus1, yMinus1, zMinus1))));\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ 151:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = FirstPersonControls;\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author paulirish / http://paulirish.com/\n */\n\nfunction FirstPersonControls(object, domElement) {\n\tfunction getOffsetRect(elem) {\n\t\tvar box = elem.getBoundingClientRect();\n\t\tvar body = document.body;\n\t\tvar docElem = document.documentElement;\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\tvar top = box.top + scrollTop - clientTop;\n\t\tvar left = box.left + scrollLeft - clientLeft;\n\t\treturn { top: Math.round(top), left: Math.round(left) };\n\t}\n\n\tthis.object = object;\n\tthis.target = new THREE.Vector3(0, 0, 0);\n\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\tthis.movementSpeed = 1.0;\n\tthis.lookSpeed = 0.005;\n\n\tthis.lookVertical = true;\n\tthis.autoForward = false;\n\t// this.invertVertical = false;\n\n\tthis.activeLook = true;\n\n\tthis.heightSpeed = false;\n\tthis.heightCoef = 1.0;\n\tthis.heightMin = 0.0;\n\tthis.heightMax = 1.0;\n\n\tthis.constrainVertical = false;\n\tthis.verticalMin = 0;\n\tthis.verticalMax = Math.PI;\n\n\tthis.autoSpeedFactor = 0.0;\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.lat = 0;\n\tthis.lon = 0;\n\tthis.phi = 0;\n\tthis.theta = 0;\n\n\tthis.moveForward = false;\n\tthis.moveBackward = false;\n\tthis.moveLeft = false;\n\tthis.moveRight = false;\n\tthis.freeze = false;\n\n\tthis.mouseDragOn = false;\n\n\tthis.viewHalfX = 0;\n\tthis.viewHalfY = 0;\n\n\tif (this.domElement !== document) {\n\n\t\tthis.domElement.setAttribute(\"tabindex\", -1);\n\t}\n\n\t//\n\n\tthis.handleResize = function () {\n\n\t\tif (this.domElement === document) {\n\n\t\t\tthis.viewHalfX = window.innerWidth / 2;\n\t\t\tthis.viewHalfY = window.innerHeight / 2;\n\t\t} else {\n\n\t\t\tthis.viewHalfX = this.domElement.offsetWidth / 2;\n\t\t\tthis.viewHalfY = this.domElement.offsetHeight / 2;\n\t\t}\n\t};\n\n\tthis.onMouseDown = function (event) {\n\n\t\tif (this.domElement !== document) {\n\n\t\t\tthis.domElement.focus();\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (this.activeLook) {\n\n\t\t\tswitch (event.button) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\tthis.moveForward = true;break;\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.moveBackward = true;break;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.mouseDragOn = true;\n\t};\n\n\tthis.onMouseUp = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (this.activeLook) {\n\n\t\t\tswitch (event.button) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\tthis.moveForward = false;break;\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.moveBackward = false;break;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.mouseDragOn = false;\n\t};\n\n\tthis.onMouseMove = function (event) {\n\n\t\tif (this.domElement === document) {\n\n\t\t\tthis.mouseX = event.pageX - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.viewHalfY;\n\t\t} else {\n\t\t\tvar rect = getOffsetRect(this.domElement);\n\n\t\t\tthis.mouseX = event.pageX - rect.left - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - rect.top - this.viewHalfY;\n\t\t}\n\t};\n\n\tthis.onKeyDown = function (event) {\n\n\t\t//event.preventDefault();\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87:\n\t\t\t\t/*W*/this.moveForward = true;break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65:\n\t\t\t\t/*A*/this.moveLeft = true;break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83:\n\t\t\t\t/*S*/this.moveBackward = true;break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68:\n\t\t\t\t/*D*/this.moveRight = true;break;\n\n\t\t\tcase 82:\n\t\t\t\t/*R*/this.moveUp = true;break;\n\t\t\tcase 70:\n\t\t\t\t/*F*/this.moveDown = true;break;\n\n\t\t\tcase 81:\n\t\t\t\t/*Q*/this.freeze = !this.freeze;break;\n\n\t\t}\n\t};\n\n\tthis.onKeyUp = function (event) {\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87:\n\t\t\t\t/*W*/this.moveForward = false;break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65:\n\t\t\t\t/*A*/this.moveLeft = false;break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83:\n\t\t\t\t/*S*/this.moveBackward = false;break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68:\n\t\t\t\t/*D*/this.moveRight = false;break;\n\n\t\t\tcase 82:\n\t\t\t\t/*R*/this.moveUp = false;break;\n\t\t\tcase 70:\n\t\t\t\t/*F*/this.moveDown = false;break;\n\n\t\t}\n\t};\n\n\tthis.update = function (delta) {\n\n\t\tif (this.freeze) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.heightSpeed) {\n\n\t\t\tvar y = THREE.Math.clamp(this.object.position.y, this.heightMin, this.heightMax);\n\t\t\tvar heightDelta = y - this.heightMin;\n\n\t\t\tthis.autoSpeedFactor = delta * (heightDelta * this.heightCoef);\n\t\t} else {\n\n\t\t\tthis.autoSpeedFactor = 0.0;\n\t\t}\n\n\t\tvar actualMoveSpeed = delta * this.movementSpeed;\n\n\t\tif (this.moveForward || this.autoForward && !this.moveBackward) this.object.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));\n\t\tif (this.moveBackward) this.object.translateZ(actualMoveSpeed);\n\n\t\tif (this.moveLeft) this.object.translateX(-actualMoveSpeed);\n\t\tif (this.moveRight) this.object.translateX(actualMoveSpeed);\n\n\t\tif (this.moveUp) this.object.translateY(actualMoveSpeed);\n\t\tif (this.moveDown) this.object.translateY(-actualMoveSpeed);\n\n\t\tvar actualLookSpeed = delta * this.lookSpeed;\n\n\t\tif (!this.activeLook) {\n\n\t\t\tactualLookSpeed = 0;\n\t\t}\n\n\t\tvar verticalLookRatio = 1;\n\n\t\tif (this.constrainVertical) {\n\n\t\t\tverticalLookRatio = Math.PI / (this.verticalMax - this.verticalMin);\n\t\t}\n\n\t\tthis.lon += this.mouseX * actualLookSpeed;\n\t\tif (this.lookVertical) this.lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n\n\t\tthis.lat = Math.max(-85, Math.min(85, this.lat));\n\t\tthis.phi = THREE.Math.degToRad(90 - this.lat);\n\n\t\tthis.theta = THREE.Math.degToRad(this.lon);\n\n\t\tif (this.constrainVertical) {\n\n\t\t\tthis.phi = THREE.Math.mapLinear(this.phi, 0, Math.PI, this.verticalMin, this.verticalMax);\n\t\t}\n\n\t\tvar targetPosition = this.target,\n\t\t    position = this.object.position;\n\n\t\ttargetPosition.x = position.x + 100 * Math.sin(this.phi) * Math.cos(this.theta);\n\t\ttargetPosition.y = position.y + 100 * Math.cos(this.phi);\n\t\ttargetPosition.z = position.z + 100 * Math.sin(this.phi) * Math.sin(this.theta);\n\n\t\tthis.object.lookAt(targetPosition);\n\t};\n\n\tthis.domElement.addEventListener(\"contextmenu\", function (event) {\n\t\tevent.preventDefault();\n\t}, false);\n\n\tthis.domElement.addEventListener(\"mousemove\", bind(this, this.onMouseMove), false);\n\tthis.domElement.addEventListener(\"mousedown\", bind(this, this.onMouseDown), false);\n\tthis.domElement.addEventListener(\"mouseup\", bind(this, this.onMouseUp), false);\n\n\twindow.addEventListener(\"keydown\", bind(this, this.onKeyDown), false);\n\twindow.addEventListener(\"keyup\", bind(this, this.onKeyUp), false);\n\n\tfunction bind(scope, fn) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply(scope, arguments);\n\t\t};\n\t};\n\n\tthis.handleResize();\n};\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// webgl-terrain/bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 148);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4871d52e9dd13e45a93c","module.exports = THREE;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 110\n// module chunks = 13","(**\n - title: WebGL Geometry Terrain\n - tagline: A 3D world right in the browser\n - app-style: height:450px; width:800px; margin:20px auto 50px auto;\n - intro: This demo is a Fable port of the [WebGL Geometry Terrain](http://threejs.org/examples/#webgl_geometry_terrain)\n   three.js demo. It uses the three.js library to randomly generate a 3D terrain which can be navigated in a first-person view.\n   The code was originally written by [John Quigley](https://github.com/jmquigs) for FunScript,\n   you can find [Fable's version on GitHub](https://github.com/fable-compiler/Fable/blob/master/samples/browser/webGLTerrain/webGLTerrain.fsx).\n\n   On the technical side, the demo shows some of the more interesting aspects of\n   calling JavaScript libraries from Fable. You'll learn how to define mapping for\n   global objects and other useful functions.\n*)\n(*** hide ***)\n// #r \"../../node_modules/fable-core/Fable.Core.dll\"\n// #load \"../../node_modules/fable-import-three/Fable.Import.Three.fs\"\n(**\nJavaScript helpers and imports\n------------------------------\n\nFable comes with [an F# mapping for three.js](https://github.com/fable-compiler/Fable/tree/master/import/three),\nwhich defines all the types and functions for three.js that we'll need in this example.\nIn addition this demo uses custom scripts for ImprovedNoise and FirstPersonControls.\nWe'll write the mappings for those two inline.\n*)\n\nmodule WebGL.Terrain\n\nopen System\nopen Fable.Core\nopen Fable.Core.JsInterop\nopen Fable.Import\n\n/// Represents the API exposed by ImprovedNoise script\ntype IPerlin =\n    abstract noise: x:float * y:float * z:float -> float\n\n/// Represents the API exposed by FirstPersonControls script\ntype IFirstPersonControls =\n    abstract movementSpeed: float with get, set\n    abstract lookSpeed: float with get, set\n    abstract handleResize: unit -> unit\n    abstract update: float -> unit\n\nlet ImprovedNoise: unit->IPerlin = importDefault \"./lib/ImprovedNoise.js\"\nlet FirstPersonControls: JsConstructor<Three.Camera, Browser.HTMLElement, IFirstPersonControls> =\n    importDefault \"./lib/FirstPersonControls.js\"\n\n(**\nInitial settings and helper functions\n------------------------------------\n\nNote: this sample is intended to be a direct port of the original\nand doesn't attempt to refactor the original to be more \"functional\".\n*)\n\nlet worldWidth = 256\nlet worldDepth = 256\nlet worldHalfWidth = worldWidth / 2\nlet worldHalfDepth = worldDepth / 2\n\nlet clock = Three.Clock()\n\n// We can also use `System.Random`, but the native JS `Math.random`\n// will be a bit more performant here.\nlet inline rand() = JS.Math.random()\n\n(**\nUsing the perlin library (ImprovedNoise script) define the peaks\nof the mountains in our random terrain.\n*)\n\nlet generateHeight width height =\n    let size = width * height\n    let data:float[] = Array.zeroCreate size\n    let perlin = ImprovedNoise()\n    let mutable quality = 1.0\n    let z = rand() * 100.0\n\n    for j in 0..3 do\n        for i in 0..(size-1) do\n            let x = i % width\n            let y = i / width\n            let noise =\n                perlin.noise(float x / quality, float y / quality, z)\n                    * quality * 1.75\n            data.[i] <- data.[i] + (JS.Math.abs ( noise ))\n        quality <- quality * 5.0\n    data\n\n(**\nTo generate the textures for the terrain, we'll be using a canvas element\nto draw the image and later pass it directly to THREE.Texture class.\n*)\n\nlet generateTexture (data:float[]) (width:int) (height:int) =\n    let vector3 = Three.Vector3(0.0, 0.0, 0.0)\n    let sun = (Three.Vector3(1.0, 1.0, 1.0) :> Three.Vector).normalize()\n\n    let canvas = Browser.document.createElement_canvas()\n    canvas.width <- float width\n    canvas.height <- float height\n\n    let context = canvas.getContext_2d()\n    context.fillStyle <- U3.Case1 \"#000\"\n    context.fillRect(0.0, 0.0, float width, float height)\n\n    let image = context.getImageData(\n                    0.0, 0.0, canvas.width, canvas.height)\n    let imageData = image.data\n\n    let mutable i = 0\n    let mutable j = 0\n    let mutable l = int imageData.length\n\n    while i < l do\n        // Note: data elements -2 and -1 are accessed here at the start\n        // of the loop. It's a bug in the original (producing NaN after\n        // normalize()), but JS just keeps on truckin'. There is a similar\n        // issue with z.  The result is that imageData is set to zero (black)\n        // in these cases\n        vector3.x <- data.[ j - 2 ] - data.[ j + 2 ]\n        vector3.y <- 2.0\n        vector3.z <- data.[ j - width * 2 ] - data.[ j + width * 2 ]\n        (vector3 :> Three.Vector).normalize() |> ignore\n\n        let shade = vector3.dot(sun :?> Three.Vector3)\n\n        imageData.[ i ] <-\n            (96.0 + shade * 128.0) * (0.5 + data.[ j ] * 0.007)\n        imageData.[ i + 1 ] <-\n            (32.0 + shade * 96.0) * (0.5 + data.[ j ] * 0.007)\n        imageData.[ i + 2 ] <-\n            (shade * 96.0) * (0.5 + data.[ j ] * 0.007)\n\n        i <- i + 4\n        j <- j + 1\n\n    context.putImageData( image, 0.0, 0.0 );\n\n    let canvasScaled = Browser.document.createElement_canvas()\n    canvasScaled.width <- float(width * 4)\n    canvasScaled.height <- float(height * 4)\n\n    let context = canvasScaled.getContext_2d()\n    context.scale(4.0,4.0)\n    context.drawImage(U3.Case2 canvas, 0.0, 0.0)\n\n    let image = context.getImageData(\n                    0.0, 0.0, canvasScaled.width, canvasScaled.height)\n    let imageData = image.data\n\n    let mutable i = 0\n    let mutable l = int imageData.length\n    while i < l do\n        // I presume double-not is used here for this reason:\n        // http://james.padolsey.com/javascript/double-bitwise-not/\n        let v = ~~~ (~~~ (rand() * 5.0 |> int)) |> float\n        imageData.[ i ] <- imageData.[ i ] + v\n        imageData.[ i + 1 ] <- imageData.[ i + 1 ] + v\n        imageData.[ i + 2 ] <- imageData.[ i + 2 ] + v\n        i <- i + 4\n\n    context.putImageData(image, 0.0, 0.0)\n    canvasScaled\n\n(**\nInitialize elements\n-------------------\n\nHere we initialize the elements necessary to draw the scene:\nthe renderer, the scene itself, a camera and controls to move it.\n\nNote the use of a compiler directive: normally we take the whole window space,\nbut if we are in the tutorial we should leave space for the explanations.\n*)\n\nlet init() =\n    #if TUTORIAL\n    let getWidth() = 800.\n    let getHeight() = 450.\n    #else\n    let getWidth() = Browser.window.innerWidth\n    let getHeight() = Browser.window.innerHeight\n    #endif\n\n    let container = Browser.document.getElementById(\"container\")\n    let camera = Three.PerspectiveCamera(\n                    60.0, getWidth() / getHeight(), 1.0, 20000.0)\n    let scene = Three.Scene()\n\n    let renderer = Three.WebGLRenderer()\n    renderer.setClearColor(\"#bfd1e5\")\n    (renderer :> Three.Renderer).setSize(getWidth(), getHeight())\n    let domElement = (renderer :> Three.Renderer).domElement\n    container.innerHTML <- \"\"\n    container.appendChild(domElement) |> ignore\n\n    let controls = FirstPersonControls.Create(camera :> Three.Camera, domElement :> Browser.HTMLElement)\n    controls.movementSpeed <- 1000.0\n    controls.lookSpeed <- 0.1\n\n    let data = generateHeight worldWidth worldDepth\n\n    camera.position.y <-\n        data.[worldHalfWidth + worldHalfDepth * worldWidth] * 10. + 500.\n\n    let geometry = Three.PlaneBufferGeometry(\n                        7500.0, 7500.0,\n                        float (worldWidth - 1), float (worldDepth - 1))\n    geometry.applyMatrix(Three.Matrix4()\n            .makeRotationX(-JS.Math.PI / 2.0))\n            |> ignore\n\n    let vertices = geometry.getAttribute(\"position\")\n                    |> unbox<Three.BufferAttribute>\n    let vertices = vertices.array\n    let l = int vertices.length\n    let mutable i = 0\n    let mutable j = 0\n    while i < l do\n        vertices.[j + 1] <- data.[i] * 10.0\n        i <- i + 1\n        j <- j + 3\n\n    let texCanvas = generateTexture data worldWidth worldDepth\n    let texture = Three.Texture(\n                    U3.Case2 texCanvas, Three.UVMapping,\n                    Three.ClampToEdgeWrapping,\n                    Three.ClampToEdgeWrapping)\n    texture.needsUpdate <- true\n\n    // We use createEmpty here to create an empty object used to set\n    // configuration parameters. The type qualifier indicates what fields\n    // we will be able to set on the resulting object. For those fields that\n    // are enum types, the possible values are usually found in three globals.\n    let matProps = createEmpty<Three.MeshBasicMaterialParameters>\n    matProps.map <- Some texture\n\n    let mesh = Three.Mesh(geometry, Three.MeshBasicMaterial(matProps))\n    scene.add mesh\n\n    let onWindowResize(e:Browser.UIEvent):obj =\n        camera.aspect <- getWidth() / getHeight()\n        camera.updateProjectionMatrix()\n        (renderer :> Three.Renderer).setSize(getWidth(), getHeight())\n        controls.handleResize()\n        null\n\n    Browser.window.addEventListener_resize(\n        Func<_,_> onWindowResize, false)\n\n    renderer, scene, camera, controls\n\nlet renderer,scene,camera,controls = init()\n\n\n(**\nStart animation\n---------------\n\nNow the only thing left is to start the animation. Note we use the\n`window.requestAnimationFrame` function here, this will make sure\n`animate` is executed at a proper frame rate.\n*)\n\nlet render() =\n    controls.update(clock.getDelta())\n    renderer.render(scene, camera)\n\nlet rec animate (dt:float) =\n    Browser.window.requestAnimationFrame(Func<_,_> animate)\n    |> ignore\n    render()\n\n// kick it off\nanimate(0.0)\n\n\n\n// WEBPACK FOOTER //\n// src/webgl-terrain/App.fs","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author paulirish / http://paulirish.com/\n */\n\nexport default function FirstPersonControls ( object, domElement ) {\n\tfunction getOffsetRect(elem) {\n\t\tvar box = elem.getBoundingClientRect()\n\t\tvar body = document.body\n\t\tvar docElem = document.documentElement\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0\n\t\tvar top  = box.top +  scrollTop - clientTop\n\t\tvar left = box.left + scrollLeft - clientLeft\n\t\treturn { top: Math.round(top), left: Math.round(left) }\n\t}\n\n\tthis.object = object;\n\tthis.target = new THREE.Vector3( 0, 0, 0 );\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\tthis.movementSpeed = 1.0;\n\tthis.lookSpeed = 0.005;\n\n\tthis.lookVertical = true;\n\tthis.autoForward = false;\n\t// this.invertVertical = false;\n\n\tthis.activeLook = true;\n\n\tthis.heightSpeed = false;\n\tthis.heightCoef = 1.0;\n\tthis.heightMin = 0.0;\n\tthis.heightMax = 1.0;\n\n\tthis.constrainVertical = false;\n\tthis.verticalMin = 0;\n\tthis.verticalMax = Math.PI;\n\n\tthis.autoSpeedFactor = 0.0;\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.lat = 0;\n\tthis.lon = 0;\n\tthis.phi = 0;\n\tthis.theta = 0;\n\n\tthis.moveForward = false;\n\tthis.moveBackward = false;\n\tthis.moveLeft = false;\n\tthis.moveRight = false;\n\tthis.freeze = false;\n\n\tthis.mouseDragOn = false;\n\n\tthis.viewHalfX = 0;\n\tthis.viewHalfY = 0;\n\n\tif ( this.domElement !== document ) {\n\n\t\tthis.domElement.setAttribute( 'tabindex', -1 );\n\n\t}\n\n\t//\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.viewHalfX = window.innerWidth / 2;\n\t\t\tthis.viewHalfY = window.innerHeight / 2;\n\n\t\t} else {\n\n\t\t\tthis.viewHalfX = this.domElement.offsetWidth / 2;\n\t\t\tthis.viewHalfY = this.domElement.offsetHeight / 2;\n\n\t\t}\n\n\t};\n\n\tthis.onMouseDown = function ( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = true; break;\n\t\t\t\tcase 2: this.moveBackward = true; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = true;\n\n\t};\n\n\tthis.onMouseUp = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = false; break;\n\t\t\t\tcase 2: this.moveBackward = false; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = false;\n\n\t};\n\n\tthis.onMouseMove = function ( event ) {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.mouseX = event.pageX - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.viewHalfY;\n\n\t\t} else {\n\t\t\tvar rect = getOffsetRect(this.domElement);\n\n\t\t\tthis.mouseX = event.pageX - rect.left - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - rect.top - this.viewHalfY;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyDown = function ( event ) {\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = true; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = true; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = true; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = true; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = true; break;\n\t\t\tcase 70: /*F*/ this.moveDown = true; break;\n\n\t\t\tcase 81: /*Q*/ this.freeze = !this.freeze; break;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyUp = function ( event ) {\n\n\t\tswitch( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = false; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = false; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = false; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = false; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = false; break;\n\t\t\tcase 70: /*F*/ this.moveDown = false; break;\n\n\t\t}\n\n\t};\n\n\tthis.update = function( delta ) {\n\n\t\tif ( this.freeze ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.heightSpeed ) {\n\n\t\t\tvar y = THREE.Math.clamp( this.object.position.y, this.heightMin, this.heightMax );\n\t\t\tvar heightDelta = y - this.heightMin;\n\n\t\t\tthis.autoSpeedFactor = delta * ( heightDelta * this.heightCoef );\n\n\t\t} else {\n\n\t\t\tthis.autoSpeedFactor = 0.0;\n\n\t\t}\n\n\t\tvar actualMoveSpeed = delta * this.movementSpeed;\n\n\t\tif ( this.moveForward || ( this.autoForward && !this.moveBackward ) ) this.object.translateZ( - ( actualMoveSpeed + this.autoSpeedFactor ) );\n\t\tif ( this.moveBackward ) this.object.translateZ( actualMoveSpeed );\n\n\t\tif ( this.moveLeft ) this.object.translateX( - actualMoveSpeed );\n\t\tif ( this.moveRight ) this.object.translateX( actualMoveSpeed );\n\n\t\tif ( this.moveUp ) this.object.translateY( actualMoveSpeed );\n\t\tif ( this.moveDown ) this.object.translateY( - actualMoveSpeed );\n\n\t\tvar actualLookSpeed = delta * this.lookSpeed;\n\n\t\tif ( !this.activeLook ) {\n\n\t\t\tactualLookSpeed = 0;\n\n\t\t}\n\n\t\tvar verticalLookRatio = 1;\n\n\t\tif ( this.constrainVertical ) {\n\n\t\t\tverticalLookRatio = Math.PI / ( this.verticalMax - this.verticalMin );\n\n\t\t}\n\n\t\tthis.lon += this.mouseX * actualLookSpeed;\n\t\tif( this.lookVertical ) this.lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n\n\t\tthis.lat = Math.max( - 85, Math.min( 85, this.lat ) );\n\t\tthis.phi = THREE.Math.degToRad( 90 - this.lat );\n\n\t\tthis.theta = THREE.Math.degToRad( this.lon );\n\n\t\tif ( this.constrainVertical ) {\n\n\t\t\tthis.phi = THREE.Math.mapLinear( this.phi, 0, Math.PI, this.verticalMin, this.verticalMax );\n\n\t\t}\n\n\t\tvar targetPosition = this.target,\n\t\t\tposition = this.object.position;\n\n\t\ttargetPosition.x = position.x + 100 * Math.sin( this.phi ) * Math.cos( this.theta );\n\t\ttargetPosition.y = position.y + 100 * Math.cos( this.phi );\n\t\ttargetPosition.z = position.z + 100 * Math.sin( this.phi ) * Math.sin( this.theta );\n\n\t\tthis.object.lookAt( targetPosition );\n\n\t};\n\n\n\tthis.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\n\tthis.domElement.addEventListener( 'mousemove', bind( this, this.onMouseMove ), false );\n\tthis.domElement.addEventListener( 'mousedown', bind( this, this.onMouseDown ), false );\n\tthis.domElement.addEventListener( 'mouseup', bind( this, this.onMouseUp ), false );\n\n\twindow.addEventListener( 'keydown', bind( this, this.onKeyDown ), false );\n\twindow.addEventListener( 'keyup', bind( this, this.onKeyUp ), false );\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t};\n\n\tthis.handleResize();\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/pong/Keyboard.fs"],"sourceRoot":""}